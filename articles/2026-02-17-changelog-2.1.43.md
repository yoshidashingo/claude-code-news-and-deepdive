---
title: "Claude Code v2.1.43 - クラウドプロバイダー連携の安定性向上"
date: 2026-02-17
source: changelog
source_url: "https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md"
identifier: "2.1.43"
---

# Claude Code v2.1.43 - クラウドプロバイダー連携の安定性向上

## 概要

Claude Code v2.1.43 では、AWS認証の無限ハング問題の解決、エージェントディレクトリの不要な警告の抑制、Vertex/Bedrock における structured-outputs ヘッダーの送信制御という3つのバグ修正が行われました。このリリースは、クラウドプロバイダーとの統合の安定性を向上させ、ユーザー体験を改善することに焦点を当てています。

## 変更点の詳細

### AWS認証の無限ハング問題の解決

AWS認証のリフレッシュ処理において、特定の条件下で処理が無限に待機状態となり、Claude Code が応答しなくなる問題が発生していました。v2.1.43 では、**3分間のタイムアウト**を実装することでこの問題を解決しています。

この修正により、AWS の認証情報が期限切れになった際や、認証サーバーとの通信に問題が生じた場合でも、一定時間後にエラーを返して処理を継続できるようになりました。特に長時間のセッションを使用する開発者にとって、予期しないフリーズから解放される重要な改善です。

### エージェントディレクトリの警告抑制

`.claude/agents/` ディレクトリは、カスタムエージェントの定義を保存するために使用されますが、このディレクトリ内に通常の Markdown ファイル（エージェント定義以外のドキュメントやメモなど）を配置した場合、不要な警告メッセージが表示される問題がありました。

v2.1.43 では、エージェント以外の Markdown ファイルに対する誤検知を排除し、不必要な警告が表示されないように修正されています。これにより、開発者は `.claude/agents/` ディレクトリをより柔軟に活用できるようになりました。

### Vertex/Bedrock での structured-outputs ヘッダー送信の制御

Google Cloud の Vertex AI や AWS の Bedrock といったクラウドプロバイダー経由で Claude API を使用する場合、structured-outputs のベータヘッダーが無条件に送信される挙動がありました。これらのプラットフォームでは、特定のヘッダーをサポートしていない、または異なる方法で処理する場合があり、不要なエラーや警告の原因となっていました。

v2.1.43 では、Vertex AI および Bedrock 使用時に structured-outputs ベータヘッダーを無条件に送信しないように修正され、各プラットフォームの仕様に適合した通信が行われるようになりました。

## 技術的なポイント

- **タイムアウト実装**: AWS認証処理に3分間のタイムアウトを設定することで、ネットワークやサービスの問題が発生した際にも適切にエラーハンドリングが行われるようになりました
- **ファイル種別の判定改善**: `.claude/agents/` ディレクトリ内のファイルを、エージェント定義とその他の Markdown ファイルで適切に区別する処理が追加されました
- **プラットフォーム固有の API 対応**: Vertex AI と Bedrock では、直接 Anthropic API を使用する場合と異なるヘッダー処理が必要であり、プラットフォームごとの適切な制御が実装されました
- **エラーハンドリングの強化**: 全体的に、異常系の処理がより堅牢になり、ユーザーに対して適切なフィードバックが提供されるようになりました

## まとめ

v2.1.43 は新機能の追加はありませんが、クラウドプロバイダーとの連携における重要な安定性の向上が図られたリリースです。特に AWS 認証のハング問題の解決は、本番環境で Claude Code を使用する開発者にとって非常に重要な修正と言えます。また、Vertex AI や Bedrock を使用している開発者にとっても、不要なエラーが抑制されることで、よりスムーズな開発体験が得られるようになりました。

今後も Claude Code は、様々なクラウドプロバイダーとの統合を改善し、マルチクラウド環境での開発をサポートしていくことが期待されます。
