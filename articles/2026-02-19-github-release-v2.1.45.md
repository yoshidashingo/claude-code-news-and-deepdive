---
title: "Claude Code v2.1.45 リリース — Claude Sonnet 4.6 対応とパフォーマンス改善"
date: 2026-02-19
source: github-release
source_url: "https://github.com/anthropics/claude-code/releases/tag/v2.1.45"
identifier: "v2.1.45"
---

# Claude Code v2.1.45 リリース — Claude Sonnet 4.6 対応とパフォーマンス改善

## 概要

Claude Code v2.1.45 がリリースされました。最新モデル **Claude Sonnet 4.6** のサポートが追加されたほか、SDK へのレート制限情報の追加、プラグイン設定の拡張など複数の新機能が導入されています。また、Agent Teams や macOS サンドボックス環境に関わるバグ修正、起動パフォーマンスとメモリ使用量の改善も含まれています。

## 新機能

### Claude Sonnet 4.6 サポート

Anthropic の最新モデルである **Claude Sonnet 4.6** が Claude Code で利用可能になりました。モデルを切り替えるには、設定または `--model` オプションで `claude-sonnet-4-6` を指定してください。

### `--add-dir` ディレクトリからのプラグイン設定読み込み

`--add-dir` オプションで追加したディレクトリから `enabledPlugins` および `extraKnownMarketplaces` の設定を読み込めるようになりました。これにより、プロジェクトごとに異なるプラグイン構成をディレクトリ単位で管理できます。

### スピナーチップのカスタマイズ (`spinnerTipsOverride`)

処理中に表示されるスピナーのヒントメッセージをカスタマイズできる `spinnerTipsOverride` 設定が追加されました。以下のように設定ファイルに記述します。

```json
{
  "spinnerTipsOverride": {
    "tips": [
      "コーヒーを飲んで待ちましょう",
      "AIが頑張っています..."
    ],
    "excludeDefault": true
  }
}
```

- `tips`: 表示するカスタムチップ文字列の配列
- `excludeDefault`: `true` にすると組み込みのデフォルトチップを非表示にし、カスタムチップのみ表示します

### SDK へのレート制限情報の追加

SDK に `SDKRateLimitInfo` および `SDKRateLimitEvent` 型が追加されました。これにより、SDK を利用するアプリケーションがレート制限の状況をリアルタイムで受け取れるようになります。含まれる情報は以下のとおりです。

- **utilization**: 現在のレート制限使用率
- **reset times**: リセットまでの時間
- **overage information**: 超過に関する情報

レート制限に近づいた際にユーザーへ警告したり、リクエストのペーシングを調整するといった用途に活用できます。

## 改善点

### 起動パフォーマンスの向上

起動時にセッション履歴を統計キャッシュ目的で先行読み込みしていた処理を削除しました。これにより、特に多くのセッション履歴を持つ環境での起動時間が短縮されます。

### シェルコマンドのメモリ使用量改善

大量の出力を生成するシェルコマンドを実行した際、RSS（Resident Set Size）メモリが際限なく増加する問題が改善されました。長時間稼働するエージェントや大規模なビルド出力を処理する場面で効果が期待されます。

### 折りたたみグループの表示改善

Read/Search の折りたたまれたグループ内で、処理中のファイル名や検索パターンをサマリー行の下に表示するようになりました。処理の進捗を視覚的に把握しやすくなります。

### [VSCode] 権限設定の永続化

VSCode 拡張機能において、権限の保存先（プロジェクト / ユーザー / セッション）の選択がセッションをまたいで保持されるようになりました。毎回選択し直す手間が省けます。

## バグ修正

### Agent Teams が Bedrock / Vertex / Foundry で失敗する問題 ([#23561](https://github.com/anthropics/claude-code/issues/23561))

Agent Teams のチームメイトプロセスが tmux 経由で起動される際に、API プロバイダーの環境変数が正しく伝搬されていませんでした。これにより、Amazon Bedrock、Google Vertex AI、Azure AI Foundry を使用している環境でチームメイトが失敗する問題が発生していました。環境変数を tmux 起動プロセスに正しく伝搬することで修正されました。

### macOS サンドボックスで一時ファイル書き込みが失敗する問題 ([#21654](https://github.com/anthropics/claude-code/issues/21654))

macOS のサンドボックス環境で一時ファイルを書き込む際に「operation not permitted」エラーが発生していました。ユーザーごとの正しい一時ディレクトリ（`/var/folders/...`）を使用するよう修正されました。

### Task ツール（バックグラウンドエージェント）が `ReferenceError` でクラッシュする問題 ([#22087](https://github.com/anthropics/claude-code/issues/22087))

バックグラウンドで実行されるエージェント（Task ツール）が完了時に `ReferenceError` でクラッシュするケースがありました。この問題が修正され、安定して完了するようになりました。

### 画像貼り付け時のオートコンプリート問題

入力欄に画像をペーストしている状態で Enter キーを押した際、オートコンプリートの候補が確定されない問題が修正されました。

### サブエージェントのスキルがメインセッションコンテキストに表示される問題

サブエージェントが起動したスキルが、コンパクション後にメインセッションのコンテキストに誤って表示されていた問題が修正されました。

### `.claude.json.backup` ファイルの過剰な蓄積

起動のたびに `.claude.json.backup` ファイルが生成・蓄積される問題が修正されました。

### プラグインのコマンド・エージェント・フックが即時反映されない問題

インストール直後のプラグインが提供するコマンド、エージェント、フックが再起動なしで利用できるようになりました。

## 技術的なポイント

- **Claude Sonnet 4.6** への対応により、最新モデルの性能を Claude Code のワークフロー上で即座に活用できます
- `SDKRateLimitInfo` / `SDKRateLimitEvent` の追加は、Claude Code SDK を組み込んだツール・CI パイプラインでのレート制限ハンドリングを改善する基盤となります
- `spinnerTipsOverride` はチーム内ツールやプロダクト埋め込み用途でのブランディングやメッセージカスタマイズに利用できます
- Agent Teams の Bedrock / Vertex / Foundry 対応修正は、クラウドプロバイダー上でマルチエージェントワークフローを運用しているユーザーにとって重要な修正です
- 起動パフォーマンスとメモリ使用量の改善は、長時間・大規模タスクを実行する際の安定性向上に寄与します

## まとめ

v2.1.45 は新モデル対応・新機能追加・複数のバグ修正・パフォーマンス改善をバランスよく含むリリースです。特に Claude Sonnet 4.6 の対応と SDK へのレート制限情報の追加は、開発者がより柔軟なアプリケーションを構築するための重要なアップデートといえます。また、Agent Teams のクラウドプロバイダー対応修正は、エンタープライズ環境での利用においても信頼性を高めるものです。引き続き安定性とパフォーマンスの改善が続けられており、日常的な開発ワークフローでの体験向上が期待されます。
