---
title: "Claude Code v2.1.43 - AWS認証タイムアウトほかバグ修正"
date: 2026-02-18
source: changelog
source_url: "https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md"
identifier: "2.1.43"
---

# Claude Code v2.1.43 - AWS認証タイムアウトほかバグ修正

## 概要

Claude Code v2.1.43 では、AWS認証のハングアップ問題、`.claude/agents/` ディレクトリでの誤警告、Vertex/Bedrockにおける構造化出力ベータヘッダーの送信制御に関する3件のバグ修正が行われました。いずれも実運用上の安定性に直結する修正です。

## 変更点の詳細

### AWS認証リフレッシュの無限ハングアップを修正

AWS認証トークンのリフレッシュ処理が無限に待機し続けるケースがあった問題を修正しました。今回の修正では **3分のタイムアウト** を設けることで、リフレッシュ処理が応答しない場合に適切にエラーとして処理されるようになります。

AWS Bedrock を通じて Claude Code を利用している環境では、認証リフレッシュが詰まることでツール全体が操作不能になるケースがあったため、この修正により信頼性が大きく向上します。

### `.claude/agents/` ディレクトリでの誤警告を修正

`.claude/agents/` ディレクトリに配置された Markdown ファイルが、エージェント定義として認識できない場合に不要な警告を出力していた問題を修正しました。

サブエージェント機能を活用するプロジェクトでは、`.claude/agents/` 配下にエージェント設定ファイル以外の Markdown ファイル（ドキュメントやメモなど）を置くケースも想定されます。今回の修正により、そうしたファイルに対して誤った警告が表示されなくなります。

### Vertex/Bedrock での構造化出力ベータヘッダーの送信を修正

Vertex AI および Amazon Bedrock 経由でリクエストを送信する際、構造化出力（Structured Outputs）機能のベータヘッダーが条件を問わず無条件に付与されていた問題を修正しました。

このヘッダーは対応するモデルやAPIエンドポイントにのみ送信されるべきものであり、不適切な送信はエラーや予期しない動作の原因となる可能性がありました。修正後は必要な場合にのみヘッダーが送信されます。

## 技術的なポイント

- **AWS認証**: タイムアウト値として3分（180秒）が設定され、無限待機状態を防止
- **エージェントディレクトリ**: エージェント定義として有効でないMarkdownファイルへの誤警告を排除し、ユーザー体験を改善
- **Vertex/Bedrock対応**: ベータヘッダーの送信ロジックを条件付きに変更することで、クラウドプロバイダー経由利用時の互換性を向上

## まとめ

v2.1.43 はいずれも実用性の高いバグ修正リリースです。特にAWS Bedrock 環境での利用者や、`.claude/agents/` を活用したマルチエージェント構成を採用しているプロジェクトには重要なアップデートとなります。安定した運用のために早めのアップデートをお勧めします。
