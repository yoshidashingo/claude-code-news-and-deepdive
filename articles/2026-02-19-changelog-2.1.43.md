---
title: "Claude Code v2.1.43: AWS認証タイムアウト、エージェントファイル警告、Vertex/Bedrock APIヘッダーの修正"
date: 2026-02-19
source: changelog
source_url: "https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md"
identifier: "2.1.43"
---

# Claude Code v2.1.43: AWS認証タイムアウト、エージェントファイル警告、Vertex/Bedrock APIヘッダーの修正

## 概要

Claude Code v2.1.43 は安定性とクラウドプロバイダー連携の改善に焦点を当てたバグ修正リリースです。AWS 認証のハング問題への対処、`.claude/agents/` ディレクトリでの不要な警告抑制、Vertex AI および Amazon Bedrock 向けの API ヘッダー修正という 3 件の修正が含まれています。

## 変更点の詳細

### AWS 認証リフレッシュのハング修正

AWS 認証情報のリフレッシュ処理が無期限にハングするという問題が修正されました。この問題は、AWS の認証情報更新を必要とする環境（Amazon Bedrock 経由で Claude Code を使用している場合など）で発生し、ツール全体が応答しなくなるという深刻な影響をもたらしていました。

修正として、認証リフレッシュ処理に **3 分のタイムアウト**が追加されました。これにより、ネットワーク障害や AWS 側の問題で認証リフレッシュが完了しない場合でも、一定時間後にタイムアウトし、適切なエラーハンドリングが行われるようになりました。

### `.claude/agents/` 内の非エージェントファイルへの偽警告を修正

`.claude/agents/` ディレクトリにエージェント定義以外のファイル（ドキュメントや設定ファイルなど）を配置していた場合、それらのファイルに対して不要な警告が表示されていた問題が修正されました。

サブエージェントのワークフローを管理する際に補助的なファイルを同ディレクトリに置いているユーザーにとって、不要なノイズとなっていたこの警告は今後表示されなくなります。

### Vertex/Bedrock での structured-outputs ベータヘッダーの送信を修正

Vertex AI および Amazon Bedrock を経由して Claude Code を使用している場合、`structured-outputs` ベータ機能のヘッダーが無条件に送信されていた問題が修正されました。

このヘッダーは Anthropic の直接 API 向けのものであり、Vertex AI や Bedrock 経由でのリクエストに含めるべきではありませんでした。この問題により、一部のリクエストで予期しない動作やエラーが発生していた可能性があります。修正後は、このヘッダーが適切なプロバイダーに対してのみ送信されるようになりました。

## 技術的なポイント

- **AWS 認証タイムアウト**: リフレッシュ処理の上限を 3 分に設定することで、無応答状態を防止。Amazon Bedrock ユーザーへの影響が大きい修正です
- **エージェントディレクトリの警告**: `.claude/agents/` 内に Markdown 形式の非エージェントファイル（READMEや補助ドキュメント等）を配置しているプロジェクトで、ログが静粛になります
- **クラウドプロバイダー固有のヘッダー管理**: `structured-outputs` ベータヘッダーの送信が Anthropic API 直接接続時のみに限定され、Vertex AI・Bedrock 経由での互換性が向上しました
- 今回の 3 件はすべてバグ修正であり、Breaking Changes や新機能はありません

## まとめ

v2.1.43 は小規模ながら実用的な安定性改善をもたらすリリースです。特に AWS 環境や Google Cloud の Vertex AI を通じて Claude Code を利用しているエンタープライズユーザーにとって、認証ハングの解消と API ヘッダーの正確な送信は重要な修正となります。また、サブエージェント機能を活用してカスタムエージェントを管理しているユーザーにとっても、ディレクトリ内の不要な警告が解消されることで作業環境がより快適になるでしょう。

クラウドプロバイダー連携の安定化という方向性は、エンタープライズ向けの利用シーンをより重視する Claude Code の開発トレンドと一致しており、今後もクラウドネイティブ環境での信頼性向上が期待されます。
