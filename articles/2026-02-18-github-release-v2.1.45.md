---
title: "Claude Code v2.1.45 リリース — Claude Sonnet 4.6 対応とパフォーマンス改善"
date: 2026-02-18
source: github-release
source_url: "https://github.com/anthropics/claude-code/releases/tag/v2.1.45"
identifier: "v2.1.45"
---

# Claude Code v2.1.45 リリース — Claude Sonnet 4.6 対応とパフォーマンス改善

## 概要

Claude Code v2.1.45 がリリースされました。最新モデルである Claude Sonnet 4.6 のサポートが追加されたほか、SDK への Rate Limit 情報型の追加、スピナーチップスのカスタマイズ機能など複数の新機能が導入されています。また、Bedrock・Vertex・Foundry 環境での Agent Teams の不具合や macOS のサンドボックスエラーなど、重要なバグ修正も含まれています。

## 新機能

### Claude Sonnet 4.6 サポート

最新の Claude Sonnet 4.6 モデルが利用可能になりました。Claude Code の設定でモデルを `claude-sonnet-4-6` に指定することで、新しいモデルを活用できます。

### `--add-dir` ディレクトリからのプラグイン設定読み込み

`--add-dir` オプションで指定したディレクトリから `enabledPlugins` および `extraKnownMarketplaces` の設定を読み込めるようになりました。これにより、プロジェクト固有のプラグイン構成をディレクトリ単位で管理できます。

### スピナーチップスのカスタマイズ（`spinnerTipsOverride`）

処理中に表示されるスピナーのチップス（ヒント文言）をカスタマイズできる `spinnerTipsOverride` 設定が追加されました。

```json
{
  "spinnerTipsOverride": {
    "tips": [
      "カスタムヒント1",
      "カスタムヒント2"
    ],
    "excludeDefault": true
  }
}
```

- `tips`: 表示したいカスタムチップス文字列の配列
- `excludeDefault`: `true` に設定すると、デフォルトのチップスを非表示にしてカスタムチップスのみを表示

チーム開発やエンタープライズ環境で、独自のヒントやガイダンスを表示するといった用途に活用できます。

### SDK への Rate Limit 情報型の追加

`SDKRateLimitInfo` および `SDKRateLimitEvent` の2つの型が SDK に追加されました。これにより SDK 利用者はレート制限の状態を受信できるようになります。

受信できる情報:
- **利用率（utilization）**: 現在のレート制限に対する使用率
- **リセット時刻（reset times）**: レート制限がリセットされる時刻
- **超過情報（overage information）**: レート制限超過に関する詳細

API 使用量の監視やスロットリング処理の実装において、より細かい制御が可能になります。

## 改善点

### 起動パフォーマンスの向上

統計キャッシュ用のセッション履歴の先行ロード（eager loading）が廃止されました。これにより、起動時の不要な処理が削減され、特に大量のセッション履歴を持つ環境での起動速度が向上します。

### シェルコマンドのメモリ使用量改善

大量の出力を生成するシェルコマンドにおいて、RSS（Resident Set Size：実メモリ使用量）がコマンド出力のサイズに比例して無制限に増加する問題が解消されました。長時間実行されるビルドコマンドやログ出力の多いコマンドを使用する場合に、安定したメモリ使用量が期待できます。

### 折りたたみ表示グループの改善

折りたたまれた read/search グループが処理中に、現在処理しているファイルパスや検索パターンをサマリー行の下に表示するようになりました。処理の進捗をより把握しやすくなります。

### [VSCode] パーミッション設定の永続化

VSCode 拡張において、パーミッションの保存先（project/user/session）の選択がセッションをまたいで保持されるようになりました。毎回設定し直す手間が省けます。

## バグ修正

### Agent Teams が Bedrock・Vertex・Foundry で失敗する問題（#23561）

API プロバイダーの環境変数が tmux で起動されたプロセスに伝播されていなかったため、Agent Teams のチームメンバーが Bedrock、Vertex、Foundry 環境で失敗していた問題が修正されました。環境変数の伝播が正しく行われるようになり、マルチクラウド環境での Agent Teams が安定して動作します。

### macOS サンドボックスで一時ファイルの書き込みエラー（#21654）

macOS のサンドボックス環境で一時ファイルを書き込む際に `operation not permitted` エラーが発生していた問題が修正されました。ユーザーごとの正しい一時ディレクトリを使用するよう修正されています。

### Task ツール（バックグラウンドエージェント）が完了時にクラッシュする問題（#22087）

Task ツールによるバックグラウンドエージェントが完了時に `ReferenceError` でクラッシュしていた問題が修正されました。

### Enter キーでの自動補完確定が機能しない問題

入力欄に画像を貼り付けた状態で Enter キーを押した際、自動補完の候補が確定されない問題が修正されました。

### サブエージェントのスキルがメインセッションに誤って表示される問題

サブエージェントから呼び出されたスキルが、コンパクション後にメインセッションのコンテキストに誤って表示されていた問題が修正されました。

### `.claude.json.backup` ファイルが大量に蓄積される問題

起動のたびに `.claude.json.backup` ファイルが生成・蓄積されていた問題が修正されました。

### プラグイン提供のコマンド・エージェント・フックが再起動後にしか利用できない問題

プラグインをインストールした直後にプラグインが提供するコマンド、エージェント、フックが利用できず、再起動が必要だった問題が修正されました。インストール後すぐに利用可能になります。

## 技術的なポイント

- **Claude Sonnet 4.6 対応**: 最新モデルへの即日対応により、モデルのアップグレードが容易になっています
- **SDK の Rate Limit API 拡充**: `SDKRateLimitInfo` / `SDKRateLimitEvent` 型を活用することで、API 消費量の監視・制御を実装したカスタムツールの開発が可能になります
- **エンタープライズ向け機能強化**: `spinnerTipsOverride` や `--add-dir` からのプラグイン設定読み込みなど、組織・チーム単位でのカスタマイズ性が向上しています
- **マルチクラウド環境の安定化**: Bedrock・Vertex・Foundry での Agent Teams 修正により、AWS・GCP・Azure など各クラウドプロバイダー経由での利用が安定します
- **メモリリーク修正**: 大量出力コマンドでの RSS 無制限増加の解消は、長時間実行される CI/CD パイプラインや自動化ワークフローにおいて重要な改善です

## まとめ

v2.1.45 では、Claude Sonnet 4.6 のサポートという大きなアップデートに加え、エンタープライズ・チーム利用を意識した設定の柔軟性向上、SDK の機能拡充が図られています。バグ修正においても、macOS サンドボックスや Bedrock/Vertex/Foundry といった特定環境での問題が解消されており、多様な環境での利用安定性が向上しています。

パフォーマンス面でも、起動速度の改善とメモリ使用量の最適化が含まれており、大規模な利用環境での運用改善が期待できます。プラグインのインストール後に再起動不要になった点も、開発体験の向上に寄与する実用的な改善です。
