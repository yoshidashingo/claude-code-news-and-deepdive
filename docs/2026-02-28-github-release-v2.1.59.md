---
title: "Claude Code v2.1.59 リリース: Auto-Memory と /copy コマンドの追加"
date: 2026-02-28
source: github-release
source_url: "https://github.com/anthropics/claude-code/releases/tag/v2.1.59"
identifier: "v2.1.59"
---

# Claude Code v2.1.59 リリース: Auto-Memory と /copy コマンドの追加

## 概要

Claude Code v2.1.59 では、Claude が有用なコンテキストを自動的に記憶する **Auto-Memory** 機能と、コードブロックを選択してコピーできる **`/copy` コマンド**が追加されました。また、複合 Bash コマンドの権限管理の改善やマルチエージェントセッションのメモリ効率化など、複数の改善・バグ修正も含まれています。

## 新機能

### Auto-Memory による自動コンテキスト保存

Claude が会話中に有用なコンテキストを自動的に auto-memory（自動記憶）へ保存するようになりました。これにより、プロジェクト固有の情報やユーザーの好みを Claude が自動的に学習・記憶し、次回以降のセッションでも活用されます。

保存された記憶の確認・管理には `/memory` コマンドを使用します。

```
/memory
```

このコマンドで auto-memory の内容を閲覧・編集・削除できます。不要な記憶を削除したり、手動でメモを追加したりすることが可能です。

### `/copy` コマンドによるコードブロック選択コピー

新しい `/copy` コマンドを使用すると、レスポンスにコードブロックが含まれている場合に、インタラクティブなピッカーが表示されます。

```
/copy
```

このピッカーにより、以下の選択が可能です。

- 特定のコードブロックのみを選択してコピー
- レスポンス全体をコピー

複数のコードブロックが含まれた長いレスポンスから、目的のコードだけを素早く取り出せるようになりました。

## 改善点

### 複合 Bash コマンドの "always allow" プレフィックス改善

`&&` で連結された複合 Bash コマンドに対する「常に許可」（always allow）設定の提案ロジックが改善されました。

**従来の動作:**
```bash
cd /tmp && git fetch && git push
```
上記のようなコマンド全体を1つの文字列として扱い、プレフィックスを提案していました。

**改善後の動作:**
コマンドを各サブコマンドに分解し、それぞれに適切なプレフィックスを計算して提案するようになりました。これにより、より細かい粒度でのコマンド許可設定が可能になります。

### 短いタスクリストの並び順改善

短いタスクリストの表示順序が改善され、より自然な優先順位での表示が期待できます。

### マルチエージェントセッションのメモリ効率化

マルチエージェントセッションにおいて、完了したサブエージェントのタスク状態を解放することでメモリ使用量が削減されました。大規模なエージェントワークフローを実行する際のリソース消費が抑えられます。

## バグ修正

### MCP OAuth トークンリフレッシュの競合状態修正

複数の Claude Code インスタンスを同時に起動している場合に発生していた、MCP（Model Context Protocol）の OAuth トークンリフレッシュ時の競合状態（race condition）が修正されました。複数インスタンスを並行して使用するワークフローでの安定性が向上します。

### 作業ディレクトリ削除時のエラーメッセージ改善

シェルコマンドの実行中に作業ディレクトリが削除された場合、これまで不明瞭なエラーが表示されることがありました。今回の修正により、ディレクトリが存在しないことを明示する分かりやすいエラーメッセージが表示されるようになりました。

## 技術的なポイント

- **Auto-Memory の管理**: `/memory` コマンドで auto-memory を定期的に見直し、不要な記憶を削除することで Claude の応答精度を維持できます
- **`/copy` コマンドの活用**: コードブロックが多いレスポンスでは `/copy` を使うと、特定のコードのみを素早くクリップボードに取り込めます
- **複合コマンドの権限設定**: `&&` で連結されたコマンドの許可設定がより細かく制御できるようになったため、セキュリティポリシーの管理が容易になります
- **マルチエージェントの安定性**: OAuth の競合状態修正により、MCP サーバーを利用した並列エージェント実行がより信頼性高く動作します
- **メモリ管理の最適化**: 長時間のマルチエージェントセッションでのメモリリーク的な問題が軽減され、大規模な自動化タスクへの適用が改善されます

## まとめ

v2.1.59 は、Auto-Memory 機能という大きなユーザー体験の改善と、複数の安定性向上が含まれたリリースです。Auto-Memory により Claude がセッションをまたいで学習・記憶できるようになり、繰り返し同じ指示を与える必要が減ることが期待されます。また、`/copy` コマンドによりコードの取り出しが効率化され、日常的な開発ワークフローでの利便性が向上します。マルチエージェントセッションの改善も含まれており、より複雑な自動化シナリオへの対応力が高まっています。
