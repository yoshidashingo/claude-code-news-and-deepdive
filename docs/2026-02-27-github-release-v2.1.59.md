---
title: "Claude Code v2.1.59 リリース - 自動メモリ機能と /copy コマンドの追加"
date: 2026-02-27
source: github-release
source_url: "https://github.com/anthropics/claude-code/releases/tag/v2.1.59"
identifier: "v2.1.59"
---

# Claude Code v2.1.59 リリース - 自動メモリ機能と /copy コマンドの追加

## 概要

Claude Code v2.1.59 では、Claude が会話の中で有用なコンテキストを自動的に保存する **auto-memory（自動メモリ）機能**が追加されました。また、コードブロックを選択してコピーできる `/copy` コマンドも新たに導入されています。加えて、複合 bash コマンドの権限管理の改善やバグ修正も含まれています。

## 新機能

### 自動メモリ機能（auto-memory）

Claude が会話の中で有用と判断したコンテキストを自動的に auto-memory に保存するようになりました。これにより、繰り返し伝える必要のある情報（プロジェクトの規約、よく使うコマンドなど）を Claude が記憶し、次のセッションでも活用できるようになります。

保存されたメモリは `/memory` コマンドで確認・管理できます。

```
/memory
```

このコマンドを実行すると、現在保存されているメモリの一覧が表示され、不要なものを削除したり内容を編集したりすることができます。

### `/copy` コマンド

レスポンスにコードブロックが含まれている場合、`/copy` コマンドを実行するとインタラクティブなピッカーが表示されます。複数のコードブロックがある場合でも、コピーしたいブロックを個別に選択できるほか、レスポンス全体をまとめてコピーすることも可能です。

```
/copy
```

これまでは特定のコードブロックだけをコピーしたい場合にマウスで範囲選択する必要がありましたが、`/copy` コマンドによってキーボード操作のみでスムーズにコピーできるようになりました。

## 改善点

### 複合 bash コマンドの "always allow" プレフィックス処理の改善

`&&` で連結された複合 bash コマンドに対する「常に許可（always allow）」のプレフィックス提案が改善されました。

以前は `cd /tmp && git fetch && git push` のようなコマンド全体を一つの文字列として扱っていたため、プレフィックスの粒度が粗くなることがありました。今回の改善により、各サブコマンド（`cd /tmp`、`git fetch`、`git push`）ごとにスマートなプレフィックスを計算するようになり、より細かい単位で権限管理を行えるようになりました。

### 短いタスクリストの順序付け改善

短いタスクリストの表示順序が改善されました。より直感的な順序でタスクが並ぶようになり、作業の流れを把握しやすくなっています。

### マルチエージェントセッションのメモリ使用量最適化

マルチエージェントセッションにおいて、完了したサブエージェントのタスク状態を解放するようになりました。長時間にわたる複数のサブエージェントを並行して動かすセッションでも、メモリ使用量が抑制され、より安定した動作が期待できます。

## バグ修正

### MCP OAuth トークン更新の競合状態を修正

複数の Claude Code インスタンスを同時に実行している場合に発生していた、MCP（Model Context Protocol）の OAuth トークン更新時の競合状態（race condition）が修正されました。同一環境で複数インスタンスを起動している際に認証が不安定になる問題が解消されています。

### 削除済み作業ディレクトリでのエラーメッセージ改善

作業ディレクトリが削除されている状態でシェルコマンドを実行しようとした場合に、明確なエラーメッセージが表示されるようになりました。以前はわかりにくいエラーが出るケースがあり、原因の特定が困難でしたが、今回の修正でトラブルシューティングが容易になっています。

## 技術的なポイント

- **auto-memory の活用**: `/memory` コマンドで定期的に保存内容を確認し、不要なものを削除することでメモリを整理しておくと、Claude がより適切なコンテキストを参照できます
- **`/copy` コマンドの活用場面**: 複数のコードスニペットを含むレスポンスから特定のものだけを取り出したい場合に特に有効です
- **複合コマンドの権限管理**: `&&` や `;` で繋いだコマンドに対する "always allow" 設定がサブコマンド単位でより精緻になり、セキュリティと利便性のバランスが向上しています
- **マルチエージェントの安定性向上**: タスク完了後の状態解放により、長時間・大規模なマルチエージェント処理がより効率的になりました
- **MCP 連携の安定化**: 複数インスタンス環境での OAuth トークン管理が堅牢になり、チーム開発や自動化環境での利用がしやすくなっています

## まとめ

v2.1.59 は、**auto-memory による文脈の持続的な保存**と **`/copy` コマンドによる操作性向上**が目玉のアップデートです。auto-memory は、Claude Code を繰り返し使うユーザーにとって特に恩恵が大きく、毎回同じ説明をしなくて済むようになります。また、複合 bash コマンドの権限管理の改善やマルチエージェントのメモリ最適化により、より大規模・長期的な用途での安定性も高まっています。日々の開発ワークフローの効率化に役立つ改善が揃ったリリースといえるでしょう。
