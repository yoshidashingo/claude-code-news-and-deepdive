---
title: "Claude Code v2.1.45 リリース — Claude Sonnet 4.6 対応と SDK レート制限情報の追加"
date: 2026-02-23
source: github-release
source_url: "https://github.com/anthropics/claude-code/releases/tag/v2.1.45"
identifier: "v2.1.45"
---

# Claude Code v2.1.45 リリース — Claude Sonnet 4.6 対応と SDK レート制限情報の追加

## 概要

Claude Code v2.1.45 では、最新モデルである Claude Sonnet 4.6 のサポートが追加されました。SDK 向けにレート制限情報を取得するための新しい型が導入されるほか、`spinnerTipsOverride` によるカスタマイズ機能も追加されています。また、macOS でのサンドボックスエラーや Agent Teams の Bedrock/Vertex/Foundry 障害など、複数の重要なバグ修正も含まれています。

## 新機能

### Claude Sonnet 4.6 サポート

Claude Code が最新の **Claude Sonnet 4.6** モデルに対応しました。最新モデルの性能向上をそのまま Claude Code の操作体験に活かすことができます。

### `--add-dir` ディレクトリからの設定読み込み

`--add-dir` オプションで指定したディレクトリから、`enabledPlugins` および `extraKnownMarketplaces` の設定を読み込めるようになりました。これにより、プロジェクト単位でのプラグイン管理やマーケットプレイス設定を `--add-dir` ベースのワークフローに組み込みやすくなります。

### `spinnerTipsOverride` 設定

処理中に表示されるスピナーのヒントテキストをカスタマイズできる `spinnerTipsOverride` 設定が追加されました。

```json
{
  "spinnerTipsOverride": {
    "tips": ["カスタムヒント1", "カスタムヒント2"],
    "excludeDefault": true
  }
}
```

- `tips`: 表示するカスタムヒント文字列の配列
- `excludeDefault`: `true` に設定すると組み込みのデフォルトヒントを非表示にし、カスタムヒントのみを表示

チーム開発やカスタムセットアップで独自のガイダンスを表示したい場合に活用できます。

### SDK へのレート制限情報追加

SDK に `SDKRateLimitInfo` および `SDKRateLimitEvent` の 2 つの型が追加されました。これにより SDK のコンシューマーはレート制限のステータス更新を受信できるようになります。受信できる情報は以下のとおりです。

- **利用率 (utilization)**: 現在のレート制限に対する使用率
- **リセット時間 (reset times)**: レート制限がリセットされるタイミング
- **超過情報 (overage information)**: 制限を超過した場合の詳細

大量の API 呼び出しを行うシステムを構築している開発者にとって、レート制限の監視と適切なバックオフ処理を実装するうえで重要な機能です。

## 改善点

### 起動パフォーマンスの向上

統計キャッシングのためのセッション履歴の即時ロードを削除し、起動速度が改善されました。セッション履歴が多い場合でも Claude Code の起動が速くなります。

### シェルコマンドのメモリ使用量改善

大きな出力を生成するシェルコマンドに対して、RSS (Resident Set Size) メモリが際限なく増加する問題が修正されました。長大な出力を伴うコマンドを多用するワークフローでのメモリ安定性が向上します。

### 読み込み・検索グループの表示改善

折りたたまれた読み込み/検索グループがアクティブな処理中に、サマリー行の下に現在処理中のファイルや検索パターンを表示するようになりました。大量のファイルを処理している際に、どのファイルを処理中かをリアルタイムで確認できます。

### [VSCode] パーミッション設定先の永続化

VSCode 拡張において、パーミッション設定先（プロジェクト/ユーザー/セッション）の選択がセッションをまたいで保持されるように改善されました。毎回設定し直す手間が省けます。

## バグ修正

### Agent Teams の Bedrock・Vertex・Foundry 障害修正

Bedrock、Vertex、Foundry 環境で Agent Teams のチームメンバーが失敗する問題が修正されました（[#23561](https://github.com/anthropics/claude-code/issues/23561)）。tmux でスポーンされるプロセスに API プロバイダーの環境変数が伝播されていなかったことが原因で、修正によって正しく伝播されるようになりました。

### macOS サンドボックスの "operation not permitted" エラー修正

macOS で一時ファイルを書き込む際に発生していた `operation not permitted` エラーが修正されました（[#21654](https://github.com/anthropics/claude-code/issues/21654)）。ユーザーごとの正しい一時ディレクトリを使用するよう修正されています。

### Task tool (バックグラウンドエージェント) のクラッシュ修正

Task tool (backgrounded agents) が完了時に `ReferenceError` でクラッシュする問題が修正されました（[#22087](https://github.com/anthropics/claude-code/issues/22087)）。

### 画像ペースト時のオートコンプリート修正

入力欄に画像をペーストした状態で Enter キーを押したときに、オートコンプリートの候補が確定されない問題が修正されました。

### サブエージェントのスキルがメインセッションに漏れる問題の修正

サブエージェントが呼び出したスキルが、コンパクション後にメインセッションのコンテキストに誤って表示される問題が修正されました。

### `.claude.json.backup` ファイルの過剰蓄積を修正

起動のたびに `.claude.json.backup` ファイルが際限なく積み重なっていた問題が修正されました。

### プラグインコマンドの即時利用

インストール直後のプラグインが提供するコマンド、エージェント、フックが再起動なしに即座に利用可能になりました。

## 技術的なポイント

- **SDK の拡張**: `SDKRateLimitInfo` / `SDKRateLimitEvent` の追加により、SDK を使ったツール開発でレート制限をプログラムから監視・制御できるようになった
- **マルチプロバイダー対応の強化**: Bedrock・Vertex・Foundry での Agent Teams 障害修正は、tmux プロセスへの環境変数伝播という根本的な問題を解決したもので、マルチプロバイダー環境での信頼性が向上した
- **macOS 固有の修正**: サンドボックス環境での一時ファイル書き込みは、正しいユーザー固有の一時ディレクトリを使用することが重要であることを示している
- **メモリ管理の改善**: 大きなシェル出力によるメモリリークの修正は、長時間稼働するエージェントやパイプライン処理を行う開発者にとって特に重要
- **プラグインの即時適用**: 再起動不要でプラグインが有効になることで、プラグイン開発や動的な設定変更のイテレーション速度が向上する

## まとめ

v2.1.45 は Claude Sonnet 4.6 への対応という重要なモデルアップデートに加え、SDK のレート制限情報取得、カスタムスピナーヒントなどの新機能が追加されました。また、Bedrock/Vertex/Foundry での Agent Teams 障害や macOS のサンドボックスエラーなど、エンタープライズ環境や特定 OS での利用を妨げていた問題が複数修正されています。起動速度とメモリ効率の改善も含まれており、全体的な使い勝手の向上が期待できるリリースです。
