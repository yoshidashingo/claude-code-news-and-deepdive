---
title: "Claude Code v2.1.38 - 安定性とセキュリティの向上"
date: 2026-02-11
source: changelog
source_url: "https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md"
identifier: "2.1.38"
---

# Claude Code v2.1.38 - 安定性とセキュリティの向上

## 概要

Claude Code v2.1.38 では、前バージョンで発生したターミナルスクロールの不具合修正を中心に、7つの重要な改善が行われました。セキュリティ強化としてコマンドスムグリング対策が実装され、VS Code 拡張機能のユーザー体験も改善されています。このリリースは新機能の追加ではなく、安定性とセキュリティの向上に重点を置いています。

## 変更点の詳細

### ターミナルスクロールの不具合修正

v2.1.37 で発生したターミナルが画面上部にスクロールしてしまう不具合が修正されました。この問題は VS Code のターミナルを使用する際に、予期しない画面移動が発生し、作業の流れを妨げていました。今回の修正により、ターミナルの動作が正常に戻り、スムーズな開発体験が復元されています。

### Tab キーの自動補完機能の修正

Tab キーを押した際に、本来表示されるべき自動補完の候補が表示されず、代わりにスラッシュコマンドがキューに追加されてしまう問題が解決されました。この不具合により、コード入力時の効率が低下していましたが、v2.1.38 では Tab キーによる自動補完が期待通りに動作するようになりました。

### Bash パーミッションマッチングの改善

環境変数のラッパーを使用するコマンドに対する Bash パーミッションのマッチングシステムが強化されました。これにより、環境変数を経由してコマンドを実行する場合でも、適切な権限管理が行われるようになりました。開発環境によっては環境変数を用いたコマンド実行が一般的であるため、この改善は実用的なワークフローをサポートします。

### ストリーミング無効時のテキスト表示問題の修正

ストリーミングが無効になっている状態で、ツールの使用と使用の間に表示されるテキストが消失してしまう問題が修正されました。この問題により、ツールの実行結果を確認する際に重要な情報が欠落する可能性がありましたが、現在はストリーミング設定に関わらず、すべてのテキストが正しく表示されるようになっています。

### セッション管理の重複問題の解決

VS Code 拡張機能で会話を再開する際に、重複したセッションが表示される問題が修正されました。この不具合は、過去の会話履歴を確認する際に混乱を招く可能性がありましたが、v2.1.38 では各セッションが一意に管理され、重複表示が発生しなくなりました。

### Heredoc デリミタの解析によるセキュリティ強化

Heredoc デリミタ（ヒアドキュメントの区切り文字）の解析が改善され、コマンドスムグリング（不正なコマンドの挿入）を防止する仕組みが実装されました。これは重要なセキュリティ強化であり、悪意のあるコードが Heredoc 構文を悪用して実行されるリスクを軽減します。特に、外部からの入力を処理する場合に有効な保護機能です。

### サンドボックスモードでのスキルディレクトリ保護

サンドボックスモード実行時に、`.claude/skills` ディレクトリへの書き込みがブロックされるようになりました。これにより、サンドボックス環境の隔離性が強化され、意図しない変更や悪意のある操作から重要なスキル設定ファイルが保護されます。

## 技術的なポイント

- **リグレッション対応**: v2.1.37 で発生したターミナルスクロールの問題が迅速に修正され、品質管理の重要性が示されています
- **ユーザー体験の改善**: Tab キーの自動補完やセッション管理の修正により、日常的な開発作業の効率が向上しています
- **セキュリティ層の追加**: Heredoc デリミタの解析強化とサンドボックス保護により、多層的なセキュリティ対策が実装されています
- **権限管理の柔軟性**: 環境変数ラッパーに対応した Bash パーミッションマッチングにより、より多様な実行環境に対応できるようになりました
- **レンダリング一貫性**: ストリーミング設定に関わらず一貫したテキスト表示が保証され、出力の信頼性が向上しています

## まとめ

Claude Code v2.1.38 は、安定性の向上とセキュリティ強化に焦点を当てたメンテナンスリリースです。前バージョンで発生した不具合の迅速な修正に加え、コマンドスムグリング対策やサンドボックス保護など、セキュリティ面での重要な改善が含まれています。

これらの修正により、Claude Code はより安定した開発環境を提供し、日常的なコーディング作業における小さなストレスを軽減します。特に VS Code 拡張機能を使用しているユーザーにとっては、ターミナル操作やセッション管理の改善が実感できるアップデートとなるでしょう。

継続的な品質改善とセキュリティ強化は、開発ツールにおいて非常に重要です。Claude Code の開発チームは、ユーザーのフィードバックに基づいて迅速に問題に対応する姿勢を示しており、今後も安定した開発体験が期待できます。
