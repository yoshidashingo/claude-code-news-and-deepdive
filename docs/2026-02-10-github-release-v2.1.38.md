---
title: "Claude Code v2.1.38 リリース - VS Code統合の安定性向上とセキュリティ強化"
date: 2026-02-10
source: github-release
source_url: "https://github.com/anthropics/claude-code/releases/tag/v2.1.38"
identifier: "v2.1.38"
---

# Claude Code v2.1.38 リリース - VS Code統合の安定性向上とセキュリティ強化

## 概要

Claude Code v2.1.38 がリリースされました。このバージョンでは、前バージョン v2.1.37 で発生した VS Code ターミナルのスクロール問題をはじめとする5つのバグ修正と、セキュリティ強化を含む2つの改善が実装されています。特に VS Code 拡張機能のユーザー体験向上とサンドボックスモードのセキュリティ強化に重点が置かれたメンテナンスリリースとなっています。

## バグ修正

### VS Code ターミナルのスクロール問題の解決

v2.1.37 で導入されたリグレッション(機能後退)により、VS Code のターミナルが自動的に最上部にスクロールしてしまう問題が発生していました。この問題は、ターミナル出力を確認する際に常に最新の出力を追跡できず、ユーザビリティを大きく損なうものでした。v2.1.38 ではこの問題が修正され、ターミナルは期待通りの動作を取り戻しました。

### Tab キーによる自動補完の修正

Tab キーを押した際に、意図した自動補完が実行されず、代わりにスラッシュコマンドがキューに追加されてしまう問題がありました。これは開発者の入力フローを妨げる重大な問題でしたが、本バージョンで正しく自動補完が機能するように修正されました。

### 環境変数ラッパーを使用したコマンドの権限マッチング

Bash コマンドの実行において、環境変数ラッパーを使用した場合に権限マッチングが正しく機能しない問題が修正されました。例えば、`ENV_VAR=value command` のような形式でコマンドを実行する際、権限システムが正しくコマンドを認識できるようになりました。これにより、より柔軟なコマンド実行環境が提供されます。

### 非ストリーミングモードでのテキスト表示問題

ストリーミングを使用しない設定の場合、ツール使用の間に表示されるべきテキストが消えてしまう問題がありました。この問題により、Claude の思考プロセスや説明が適切に表示されず、ユーザーが状況を理解しにくくなっていました。v2.1.38 ではこの問題が解決され、すべてのテキストが正しく表示されるようになりました。

### VS Code 拡張機能でのセッション重複問題

VS Code 拡張機能でセッションを再開する際に、重複したセッションが作成されてしまう問題が修正されました。この問題は、リソースの無駄遣いや予期しない動作の原因となっていましたが、本バージョンで適切にセッション管理が行われるようになりました。

## 改善点

### heredoc デリミタ解析の強化によるコマンドインジェクション対策

heredoc(ヒアドキュメント)のデリミタ解析が改善され、コマンドスマグリング(command smuggling、悪意のあるコマンドの密輸)を防止できるようになりました。heredoc は複数行の文字列をシェルスクリプトに埋め込む際に使用される機能ですが、デリミタの解析が不適切な場合、意図しないコマンドが実行されるセキュリティリスクがありました。

例えば、以下のような heredoc の使用において、デリミタが適切に認識されることが保証されます。

```bash
cat <<'EOF'
テキストコンテンツ
EOF
```

この改善により、Claude Code が生成するスクリプトの安全性が向上しました。

### サンドボックスモードでの `.claude/skills` ディレクトリへの書き込みブロック

サンドボックスモードにおいて、`.claude/skills` ディレクトリへの書き込みがブロックされるようになりました。skills ディレクトリは Claude Code の機能拡張に使用される重要なディレクトリであり、サンドボックス環境でこのディレクトリへの不正な書き込みを防ぐことで、セキュリティが強化されました。この変更により、サンドボックスモードでの実行時に、システムの重要な設定が意図せず変更されるリスクが軽減されます。

## 技術的なポイント

- **リグレッションの迅速な対応**: v2.1.37 で発生した VS Code ターミナルのスクロール問題が、わずか1バージョンで修正されており、開発チームの迅速な対応が確認できます
- **権限システムの堅牢性**: 環境変数ラッパーを考慮した権限マッチングの実装により、より複雑なコマンド実行パターンに対応できるようになりました
- **セキュリティ重視の姿勢**: heredoc 解析の改善とサンドボックスモードの強化により、コードインジェクション攻撃への耐性が向上しています
- **ユーザー体験の改善**: Tab キーの自動補完やテキスト表示の修正など、日常的な操作に関わる問題が解決され、スムーズな開発フローが実現されています
- **VS Code 拡張機能の安定性向上**: セッション管理の改善により、拡張機能としての信頼性が向上しました

## まとめ

Claude Code v2.1.38 は、主にバグ修正とセキュリティ強化に焦点を当てたメンテナンスリリースです。特に VS Code 拡張機能のユーザーにとっては、ターミナルのスクロール問題やセッション重複問題が解決されたことで、より快適な開発体験が得られるようになりました。

また、heredoc 解析の改善やサンドボックスモードでの書き込み制限といったセキュリティ強化により、Claude Code が生成するコードやスクリプトの安全性が向上しています。これは、AI アシスタントツールが企業環境やセキュリティ要件の厳しいプロジェクトで使用される上で重要な進歩です。

今後も Claude Code は、ユーザーフィードバックに基づいた迅速なバグ修正と、セキュリティ強化を継続していくことが期待されます。v2.1.38 へのアップデートを推奨します。
